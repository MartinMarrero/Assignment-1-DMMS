var p=Object.defineProperty;var f=(l,n,e)=>n in l?p(l,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[n]=e;var h=(l,n,e)=>f(l,typeof n!="symbol"?n+"":n,e);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function e(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(t){if(t.ep)return;t.ep=!0;const o=e(t);fetch(t.href,o)}})();class w{constructor(n){h(this,"onCompute",null);h(this,"container");h(this,"textarea");h(this,"select");h(this,"hurwitzInput");h(this,"button");h(this,"output");this.container=n||document.body,this.textarea=document.createElement("textarea"),this.textarea.rows=8,this.textarea.cols=60,this.textarea.placeholder=`CSV format: header row with names, then two rows with outcomes.
Example:
,StatusQuo,Expansion,BuildingHQ,Collaboration
10,20,30,40
5,25,15,35`,this.select=document.createElement("select"),["pessimistic","optimistic","laplace","hurwitz"].forEach(o=>{const r=document.createElement("option");r.value=o,r.textContent=o,this.select.appendChild(r)}),this.hurwitzInput=document.createElement("input"),this.hurwitzInput.type="number",this.hurwitzInput.min="0",this.hurwitzInput.max="1",this.hurwitzInput.step="0.1",this.hurwitzInput.value="0.5",this.button=document.createElement("button"),this.button.textContent="Compute",this.output=document.createElement("div"),this.output.style.marginTop="12px";const e=document.createElement("div");e.style.marginTop="8px",e.appendChild(this.select);const s=document.createElement("label");s.textContent=" Hurwitz degree: ",s.appendChild(this.hurwitzInput),e.appendChild(s),e.appendChild(this.button);const t=document.createElement("h2");t.textContent="Decision methods (MVC demo)",this.container.appendChild(t),this.container.appendChild(this.textarea),this.container.appendChild(e),this.container.appendChild(this.output),this.button.addEventListener("click",()=>this.handleCompute())}handleCompute(){if(!this.onCompute)return;const n=this.textarea.value,e=this.select.value,s=this.hurwitzInput.value||"0.5",t=parseFloat(s.replace(",","."))||.5;this.onCompute(n,e,{degree:t})}showResult(n,e){this.output.innerHTML=`<strong>Selected:</strong> ${n} (<em>${e.toFixed(2)}</em>)`}}class m{}class g extends m{Execute(n){if(n.length===0)return["",0];let e=n[0],s=-1/0;for(const t of n)t.outcomes.first>s&&(e=t,s=t.outcomes.first);return[e.name,s]}}class x extends m{Execute(n){if(n.length===0)return["",0];let e=n[0],s=-1/0;for(const t of n)t.outcomes.second>s&&(e=t,s=t.outcomes.second);return[e.name,s]}}class C extends m{Execute(n){if(n.length===0)return["",0];let e=n[0],s=-1/0;for(const t of n){const o=(t.outcomes.first+t.outcomes.second)/2;o>s&&(e=t,s=o)}return[e.name,s]}}class b{constructor(n){h(this,"onResult");this.onResult=n}handleCompute(n,e,s){const t=this.parseCSV(n);let o=["",0];switch(e){case"pessimistic":o=new g().Execute(t);break;case"optimistic":o=new x().Execute(t);break;case"laplace":o=new C().Execute(t);break;case"hurwitz":s&&typeof s.degree=="number"?o=this.executeHurwitz(t,s.degree):o=this.executeHurwitz(t,.5);break;default:o=["",0]}this.onResult(o[0],o[1])}executeHurwitz(n,e){if(n.length===0)return["",0];let s=n[0],t=-1/0;for(const o of n){const r=e*o.outcomes.second+(1-e)*o.outcomes.first;r>t&&(s=o,t=r)}return[s.name,t]}parseCSV(n){const e=[];if(!n)return e;const s=n.split(/\r?\n/).map(c=>c.trim()).filter(c=>c.length>0);if(s.length===0)return e;const t=s[0].split(",").map(c=>c.trim());for(let c=1;c<t.length;++c)e.push({name:t[c],outcomes:{first:0,second:0}});const o=c=>{if(!c)return 0;const u=c.replace(/\s+/g,"").replace(",","."),i=Number.parseFloat(u);return Number.isFinite(i)?i:0};let r=0;for(let c=1;c<s.length&&r<2;++c){const u=s[c].split(",").map(i=>i.trim());if(u.length!==0){if(u.length===e.length)for(let i=0;i<u.length&&i<e.length;++i){const a=o(u[i]);r===0?e[i].outcomes.first=a:e[i].outcomes.second=a}else if(u.length===e.length+1)for(let i=1;i<u.length&&i<=e.length;++i){const a=o(u[i]);r===0?e[i-1].outcomes.first=a:e[i-1].outcomes.second=a}else{const i=Math.min(u.length,e.length);for(let a=0;a<i;++a){const d=o(u[a]);r===0?e[a].outcomes.first=d:e[a].outcomes.second=d}}r++}}return e}}window.addEventListener("DOMContentLoaded",()=>{const l=new w,n=new b((e,s)=>{l.showResult(e,s)});l.onCompute=(e,s,t)=>n.handleCompute(e,s,t)});
